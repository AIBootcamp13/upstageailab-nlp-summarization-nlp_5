# ğŸš€ ìµœì í™”ëœ Config - RTX 3090 24GB + Python 3.11 í™˜ê²½
# Notion ìƒìœ„ ì„±ëŠ¥ ëª¨ë¸ íŒ¨í„´ ë¶„ì„ ê¸°ë°˜ (Public 48.08270, Val 27.33300 ëª©í‘œ)
# ìƒì„±ì¼: 2025-08-06

general:
  data_path: ./data/
  model_name: digit82/kobart-summarization  # ê²€ì¦ëœ ë² ì´ìŠ¤ ëª¨ë¸
  output_dir: ./outputs/exp_optimized_lyj
  train_data: train_japan_backtranslation_filtered.csv  # ë°±ë²ˆì—­ ë°ì´í„° í™œìš©

inference:
  batch_size: 48                    # RTX 3090 24GB ìµœì í™” (32â†’48)
  ckt_dir: ./outputs/exp_optimized_lyj/best
  early_stopping: true
  generate_max_length: 180          # ìµœì  ê¸¸ì´ (200â†’180)
  no_repeat_ngram_size: 3           # ë°˜ë³µ ë°©ì§€ ê°•í™” (2â†’3)
  num_beams: 6                      # Beam search í™•ì¥ (4â†’6)
  length_penalty: 1.2               # ê¸¸ì´ í˜ë„í‹° ì¶”ê°€ (ìƒìœ„ ëª¨ë¸ íŒ¨í„´)
  repetition_penalty: 1.1           # ë°˜ë³µ í˜ë„í‹° ì¶”ê°€
  remove_tokens:
  - <usr>
  - <s>
  - </s>
  - <pad>
  - <unk>                          # ì¶”ê°€ ë…¸ì´ì¦ˆ í† í°
  result_path: ./outputs/exp_optimized_lyj/submission_lyj.csv

tokenizer:
  bos_token: <s>
  decoder_max_len: 180              # inferenceì™€ ì¼ì¹˜
  encoder_max_len: 768              # í™•ì¥ (512â†’768)
  eos_token: </s>
  special_tokens:                   # ê²€ì¦ëœ Special Token ì„¸íŠ¸
  - '#Person1#'
  - '#Person2#'
  - '#Person3#'
  - '#Person4#'
  - '#Person5#'
  - '#Person6#'
  - '#Person7#'
  - '#PhoneNumber#'
  - '#Address#'
  - '#DateOfBirth#'
  - '#PassportNumber#'
  - '#SSN#'
  - '#CardNumber#'
  - '#CarNumber#'
  - '#Email#'
  - '#Topic#'                      # Topic ì •ë³´ í™œìš©
  - '#SEP#'                        # êµ¬ë¶„ì í† í°

training:
  # ğŸ“Š ë°°ì¹˜ ë° ë°ì´í„° ìµœì í™” (RTX 3090 24GB í™œìš©)
  per_device_train_batch_size: 80   # ë©”ëª¨ë¦¬ ìµœëŒ€ í™œìš© (64â†’80)
  per_device_eval_batch_size: 64    # í‰ê°€ ë°°ì¹˜ í™•ëŒ€ (48â†’64)
  dataloader_num_workers: 16        # CPU 48ìŠ¤ë ˆë“œ í™œìš© (8â†’16)
  dataloader_drop_last: false
  dataloader_pin_memory: true       # ë©”ëª¨ë¦¬ ìµœì í™” ì¶”ê°€
  dataloader_persistent_workers: true  # ì›Œì»¤ ì¬ì‚¬ìš©
  
  # ğŸ¯ í•™ìŠµ ì „ëµ ìµœì í™”
  num_train_epochs: 15              # íš¨ìœ¨ì  ì—í¬í¬ (20â†’15)
  learning_rate: 3.0e-05            # í•™ìŠµë¥  ì¦ê°€ (1e-5â†’3e-5)
  warmup_steps: 500                 # Warmup í™•ëŒ€ (10â†’500)
  weight_decay: 0.005               # ì •ê·œí™” ê°•í™” (0.01â†’0.005)
  
  # ğŸ”§ ê³ ê¸‰ ìµœì í™” (Python 3.11 + PyTorch 2.6)
  fp16: true                        # í˜¼í•© ì •ë°€ë„ ìœ ì§€
  torch_compile: true               # PyTorch 2.6 ì»´íŒŒì¼ ìµœì í™”
  torch_compile_mode: "default"     # ê¸°ë³¸ ì»´íŒŒì¼ ëª¨ë“œ
  
  # ğŸ’¾ ë©”ëª¨ë¦¬ ë° ì„±ëŠ¥ ìµœì í™”
  gradient_checkpointing: true
  gradient_checkpointing_kwargs:
    use_reentrant: false
  gradient_accumulation_steps: 1    # ë°°ì¹˜ í¬ê¸° ì¦ê°€ë¡œ 1 ìœ ì§€
  torch_empty_cache_steps: 5        # ìºì‹œ ì •ë¦¬ ì£¼ê¸° (10â†’5)
  
  # ğŸ“ˆ í‰ê°€ ë° ì €ì¥ ì „ëµ
  evaluation_strategy: steps
  eval_steps: 300                   # í‰ê°€ ì£¼ê¸° ë‹¨ì¶• (400â†’300)
  save_steps: 300                   # ì €ì¥ ì£¼ê¸° ì¼ì¹˜
  logging_steps: 50                 # ë¡œê¹… ì„¸ë¶„í™” (100â†’50)
  
  # ğŸª Early Stopping ì¡°ì •
  early_stopping_patience: 2        # íŒ¨í‹°ì–¸ìŠ¤ ì¦ê°€ (1â†’2)
  early_stopping_threshold: 0.0005  # ì„ê³„ê°’ ê°•í™” (0.001â†’0.0005)
  
  # ğŸ² ì¬í˜„ì„± ë° ê¸°íƒ€
  seed: 2025                        # ìƒˆë¡œìš´ ì‹œë“œ
  group_by_length: true
  remove_unused_columns: true
  predict_with_generate: true
  generation_max_length: 180        # ì¼ê´€ì„± ìœ ì§€
  
  # ğŸ’½ ì €ì¥ ê´€ë¦¬
  output_dir: ./outputs/exp_optimized_lyj
  overwrite_output_dir: false
  save_total_limit: 3               # ì²´í¬í¬ì¸íŠ¸ ì¦ê°€ (1â†’3)
  load_best_model_at_end: true
  
  # ğŸ“Š ë¦¬í¬íŒ…
  report_to: wandb
  logging_dir: ./outputs/exp_optimized_lyj/logs

# ğŸ” WandB ì‹¤í—˜ ì¶”ì 
wandb:
  entity: lyjune37
  name: optimized_lyj_v1
  notes: "RTX3090+Python3.11 ìµœì í™”, Beam6, LR3e-5, Batch80, Epoch15"
  project: nlp-5
  tags:
  - "optimized"
  - "lyj"
  - "rtx3090"
  - "python311"
  - "beam6"

# ğŸ¯ ì‹¤í—˜ ë©”íƒ€ë°ì´í„°
experiment:
  version: "1.0"
  target_score: 
    public: 48.5     # ëª©í‘œ Public ì ìˆ˜
    val: 28.0        # ëª©í‘œ Validation ì ìˆ˜
  hardware: "RTX 3090 24GB"
  python_version: "3.11.13"
  pytorch_version: "2.6.0"
  optimization_focus:
  - "Beam search í™•ì¥"
  - "ë°°ì¹˜ í¬ê¸° ìµœì í™”"
  - "ê¸¸ì´ ì¡°ì •"
  - "Special token í™œìš©"
  - "PyTorch 2.6 ì»´íŒŒì¼"