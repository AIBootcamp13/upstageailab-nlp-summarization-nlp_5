# ğŸ† Ultimate Performance Config - 1ìœ„ ë‹¬ì„±ìš© (ìˆ˜ì •ë¨)
# warmup_steps ëˆ„ë½ ì˜¤ë¥˜ ìˆ˜ì •

general:
  data_path: ./data/
  model_name: digit82/kobart-summarization
  output_dir: ./outputs/exp_ultimate_lyj
  train_data: train_japan_backtranslation_filtered.csv

inference:
  batch_size: 32
  ckt_dir: ./outputs/exp_ultimate_lyj/best
  early_stopping: true
  generate_max_length: 220
  num_beams: 10
  length_penalty: 1.8
  repetition_penalty: 1.2
  no_repeat_ngram_size: 5
  do_sample: false
  remove_tokens:
  - <usr>
  - <s>
  - </s>
  - <pad>
  - <unk>
  result_path: ./outputs/exp_ultimate_lyj/submission_ultimate.csv

tokenizer:
  bos_token: <s>
  decoder_max_len: 220
  encoder_max_len: 896
  eos_token: </s>
  special_tokens:
  - '#Person1#'
  - '#Person2#'
  - '#Person3#'
  - '#Person4#'
  - '#Person5#'
  - '#Person6#'
  - '#Person7#'
  - '#PhoneNumber#'
  - '#Address#'
  - '#DateOfBirth#'
  - '#PassportNumber#'
  - '#SSN#'
  - '#CardNumber#'
  - '#CarNumber#'
  - '#Email#'
  - '#Topic#'
  - '#SEP#'

training:
  # ë°°ì¹˜ ë° ë°ì´í„°
  per_device_train_batch_size: 64
  per_device_eval_batch_size: 48
  dataloader_num_workers: 12
  dataloader_drop_last: false
  dataloader_pin_memory: true
  dataloader_persistent_workers: true
  
  # í•™ìŠµ ì„¤ì • (ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„° í¬í•¨)
  num_train_epochs: 8
  learning_rate: 2.5e-05
  warmup_steps: 500
  weight_decay: 0.008
  
  # ìµœì í™”
  fp16: true
  torch_compile: true
  torch_compile_mode: "reduce-overhead"
  gradient_checkpointing: true
  gradient_checkpointing_kwargs:
    use_reentrant: false
  gradient_accumulation_steps: 2
  torch_empty_cache_steps: 3
  
  # í‰ê°€ ë° ì €ì¥
  evaluation_strategy: steps
  eval_steps: 250
  save_steps: 250
  logging_steps: 25
  early_stopping_patience: 3
  early_stopping_threshold: 0.0003
  
  # ê¸°íƒ€
  seed: 42
  report_to: []
  group_by_length: true
  remove_unused_columns: true
  predict_with_generate: true
  generation_max_length: 220
  output_dir: ./outputs/exp_ultimate_lyj
  overwrite_output_dir: false
  save_total_limit: 5
  load_best_model_at_end: true
  metric_for_best_model: eval_rouge-2
  greater_is_better: true
  logging_dir: ./outputs/exp_ultimate_lyj/logs